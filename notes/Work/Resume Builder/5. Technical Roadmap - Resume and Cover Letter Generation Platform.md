#### 1. Frontend Roadmap (MVP)

| Item                   | Decision / Detail                                                                                                                                                     |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Framework**          | Next.js + Tailwind + Radix UI                                                                                                                                         |
| **Hosting**            | **Railway** (mono-repo with backend)                                                                                                                                  |
| **Auth**               | ***Optional login***. Default flow is **Guest Mode** (auto-generated UUID stored in `localStorage`).<br>Users may “Sign in to save work” via Supabase email/password. |
| **Core UI**            | Chat feed · file upload area · résumé/letter **read-only preview** · download button · “Sign in” link/banner                                                          |
| **Omitted (post-MVP)** | History page · live markdown editor · onboarding wizard                                                                                                               |

---

#### 2. Backend Roadmap (MVP)

| Item              | Decision                                                                                                                          |
| ----------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| **Stack**         | FastAPI (Python 3.11)                                                                                                             |
| **Hosting**       | Railway service                                                                                                                   |
| **Auth**          | Middleware accepts **either**<br>• Supabase JWT `Authorization: Bearer …`<br>• `X-Guest-Id: <uuid>` header (generated if absent). |
| **Endpoints**     | `POST /upload` · `POST /chat` · `POST /generate` · `GET /export/{session_id}` · `GET /ping` (all work for guest or signed user)   |
| **Core Services** | Basic file parser (text extract) · prompt builder · OpenAI wrapper · **react-pdf** generator inside Node script                   |
| **Deferred**      | Rules engine · `/step/:id` · advanced parsing · Playwright/Chromium PDF                                                           |

---

#### 3. Database Schema (MVP)

| Table                                                            | Purpose / Notes                                                      |
| ---------------------------------------------------------------- | -------------------------------------------------------------------- |
| `users(id, email)`                                               | Supabase sync                                                        |
| `sessions(id, user_id, status, created_at)`                      | Sessions for registered users                                        |
| `guest_sessions(id, guest_id, status, created_at)`               | Sessions for anonymous guests (keyed by UUID stored in browser)      |
| `uploads(id, session_id, guest_session_id, file_path, metadata)` | File metadata (one FK nullable pair)                                 |
| `outputs(id, session_id, guest_session_id, data)`                | JSON résumé + cover letter                                           |
| *Future tables*                                                  | `conversation_steps`, `resume_context`, `parsed_elements` (post-MVP) |

---

#### 4. LLM Interaction Layer (MVP)

* **Linear chain**

  1. Parse uploads → plain text
  2. Chat clarify (user Q\&A)
  3. Generate résumé + cover letter
* JSON output validated (Pydantic)
* Retry malformed responses ≤ 3

---

#### 5. Export Service (MVP)

* **react-pdf** server render via Node script invoked by backend
* Upgrade path: Playwright/Chromium for pixel-perfect print (post-MVP)

---

#### 6. Implementation Phases (MVP)

| Phase                | Scope (all guest-mode ready)                                                                                   |
| -------------------- | -------------------------------------------------------------------------------------------------------------- |
| **P0 Infra**         | Repo bootstrap · pnpm workspaces · Railway project & secrets                                                   |
| **P1 Backend Core**  | FastAPI scaffold · identity middleware (JWT/guest) · `/upload` `/chat` `/generate` `/export`                   |
| **P2 Frontend Core** | Next.js scaffold · guest auto-ID logic · auth pages (optional sign-in) · chat UI · upload · preview · download |
| **P3 Polish & Demo** | Error toasts · Radix theme · simple parser update                                                              |

*Post-MVP*: Playwright PDF · live editor · history view · step engine · analytics

---

#### 7. Library List (MVP)

* **Frontend:** `@supabase/auth-helpers-nextjs` · `react-dropzone` · `react-hot-toast` · `react-markdown` · `@radix-ui/themes`
* **Backend:** `fastapi` · `uvicorn` · `supabase` · `openai` · `pydantic` · `python-dotenv` · `react-pdf` (Node script) · `playwright` *(post-MVP)*